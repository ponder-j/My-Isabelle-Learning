# 14.4 HOL中的集合论

本书[第6章 集合与关系](https://www.yuque.com/zhaoyongwang/fpp/xh7gad)中详细讨论了集合、关系及运算，本小节讨论集合论的推理规则。Isabelle的对象逻辑中，有两种集合论的实现：对象逻辑HOL中的Set、对象逻辑ZF，本节介绍第一种实现，它被较多地使用。HOL中实现的集合论与ZF公理化集合论有所区别，HOL中通过类型来实现集合，集合'a set本质上等价于'a ⇒ bool。这样，每个类型都有有个全集，集合根据类型'a上的谓词来定义。集合可以包含其他集合，但是包含集合必须是一个更为复杂的类型。



# 集合的基本规则
集合的基本规则，定义了集合论中各种特征集合和基本运算的法则，包括集合和谓词的关系、空集、集合插入、子集、交并差、幂集、镜像等，具体如`**表1**`所示。

**表1：集合的基本规则**

| **规则名称** | **规则定义** |
| --- | --- |
| mem_Collect_eq | a∈({x. P x}) = P a |
| Collect_mem_eq | {x. x∈A} = A |
| empty_def | {} = {x. False} |
| insert_def | insert a B = {x. x = a} ∪ B |
| Ball_def | Ball A P = (∀x. x∈A ⟶ P x) |
| Bex_def | Bex A P = (∃x. x ∈ A ∧ P x) |
| subset_def | A ⊆ B = ∀x∈A. x∈B |
| Un_def | A ∪ B = {x. x ∈ A ∨ x ∈ B} |
| Int_def | A ∩ B = {x. x ∈ A ∧ x ∈ B} |
| set_diff_eq | A - B = {x. x ∈ A ∧ x ∉ B} |
| Compl_eq | - A = {x. ¬ x ∈ A} |
| INTER_def | INTER A B = {y. ∀x∈A. y∈B x} |
| UNION_def | UNION A B = {y. ∃x∈A. y∈B x} |
| INTER1_def | INTER1 B = INTER {x. True} B |
| UNION1_def | UNION1 B = UNION {x. True} B |
| Inter_def | Inter S = (INT x∈S. x) |
| Union_def | Union S = (UN x∈S. x) |
| Pow_def | Pow A = {B. B ⊆ A} |
| image_def | f ` A = {y. ∃x∈A. y = f x} |
| range_def | range f = f ` UNIV |




# 内涵(Comprehension)与有界量词
集合的内涵规则说明了谓词与集合元素之间的关系。CollectI和CollectD规则说明P a成立，当且仅当a ∈ {x. P x}。有了集合的概念后，可以在公式中使用诸如∀x∈A和∃x∈A这样的量词，表明约束变元x的论域是集合A，这样的量词称为有界量词。有界量词规则与高阶逻辑的量词规则类似，只是量词的类型不同。

**表2：内涵和有界量词规则**

| **规则名称** | **规则定义** |
| --- | --- |
| CollectI | P a ⟹ a ∈ {x. P x} |
| CollectD | a ∈ {x. P x} ⟹ P a |
| CollectE | ⟦ a ∈ {x. P x}; P a ⟹ W ⟧ ⟹ W |
| ballI | (⋀x. x ∈ A ⟹ P x) ⟹ ∀x∈A. P x |
| bspec | ∀x∈A. P x ⟹ x ∈ A ⟹ P x |
| ballE | ∀x∈A. P x ⟹ (P x ⟹ Q) ⟹ (x ∉ A ⟹ Q) ⟹ Q |
| bexI | P x ⟹ x ∈ A ⟹ ∃x∈A. P x |
| bexCI | (∀x∈A. ¬ P x ⟹ P a) ⟹ a ∈ A ⟹ ∃x∈A. P x |
| bexE | ∃x∈A. P x ⟹ (⋀x. x ∈ A ⟹ P x ⟹ Q) ⟹ Q |




# 子集及等式规则
子集规则说明了子集和集合元素之间的关系，以及子集关系的特性。A ⊆ B当且仅当c ∈ A ⟹ c ∈ B。同时子集关系⊆具有自反性(reflexive)和传递性(transitive)。集合等式规则，说明了集合等式与集合子集的关系、集合等式与集合元素的关系，以及与逻辑公式之间的关系(equalityE和equalityCE规则)。两集合A = B，当且仅当A ⊆ B 且 B ⊆ A。

**表3：子集及等式规则**

| **规则名称** | **规则定义** |
| --- | --- |
| subsetI | (⋀x. x ∈ A ⟹ x ∈ B) ⟹ A ⊆ B |
| subsetD | A ⊆ B ⟹ c ∈ A ⟹ c ∈ B |
| subsetCE | A ⊆ B ⟹ (c ∉ A ⟹ P) ⟹ (c ∈ B ⟹ P) ⟹ P |
| subset_refl | A ⊆ A |
| subset_trans | A ⊆ B ⟹ B ⊆ C ⟹ A ⊆ C |
| equalityI | A ⊆ B ⟹ B ⊆ A ⟹ A = B |
| equalityD1 | A = B ⟹ A ⊆ B |
| equalityD2 | A = B ⟹ B ⊆ A |
| equalityE | A = B ⟹ (A ⊆ B ⟹ B ⊆ A ⟹ P) ⟹ P |
| equalityCE | A = B ⟹ (c ∈ A ⟹ c ∈ B ⟹ P) ⟹ (c ∉ A ⟹ c ∉ B ⟹ P) ⟹ P |




# 集合的Lattice规则
格Lattice是一种代数结构，格是其非空有限子集都有一个上确界和一个下确界的偏序集合。集合的Lattice规则，说明了集合交并运算和子集关系的Lattice性质。

**表4：集合的Lattice规则**

| **规则名称** | **规则定义** |
| --- | --- |
| Un_upper1 | A ⊆ A ∪ B |
| Un_upper2 | B ⊆ A ∪ B |
| Un_least | A ⊆ C ⟹ B ⊆ C ⟹ A ∪ B ⊆ C |
| Int_lower1 | A ∩ B ⊆ A |
| Int_lower2 | A ∩ B ⊆ B |
| Int_greatest | C ⊆ A ⟹ C ⊆ B ⟹ C ⊆ A ∩ B |
| Union_upper | B∈A ⟹ B ⊆ Union A |
| Union_least | (⋀x. x ∈ A ⟹ x ⊆ B) ⟹ Union A ⊆ B |
| Inter_lower | B∈A ⟹ Inter A ⊆ B |
| Inter_greatest | (⋀X. X ∈ A ⟹ C ⊆ X) ⟹ C ⊆ Inter A |




# 集合的等式规则


**表5：集合的等式规则**

| **规则名称** | **规则定义** |
| --- | --- |
| Int_absorb | A ∩ A = A |
| Int_commute | A ∩ B = B ∩ A |
| Int_assoc | (A ∩ B) ∩ C = A ∩ (B ∩ C) |
| Int_Un_distrib | A ∩ (B ∪ C) = (A ∩ B) ∪ (A ∩ C) |
| Un_absorb | A ∪ A = A |
| Un_commute | A ∪ B = B ∪ A |
| Un_assoc | (A ∪ B) ∪ C = A ∪ (B ∪ C) |
| Un_Int_distrib | A ∪ (B ∩ C) = (A ∪ B) ∩ (A ∪ C) |
| Compl_disjoint | A ∩ - A = {} |
| Compl_partition | A ∪ - A = UNIV |
| double_complement | - (-A) = A |
| Compl_Un | - (A ∪ B) = (- A) ∩ (- B) |
| Compl_Int | - (A ∩ B) = (- A) ∪ (- B) |
| Union_Un_distrib | ⋃(A ∪ B) = ⋃A ∪ ⋃B |
| Int_Union | A ∩ ⋃B = (⋃C∈B. A ∩ C) |
| Inter_Un_distrib | ⋂(A ∪ B) = ⋂A ∩ ⋂B |
| Un_Inter | A ∪ ⋂B = (⋂C∈B. A ∪ C) |




# 其他规则


**表6：集合的其他规则**

| **规则名称** | **规则定义** |
| --- | --- |
| emptyE | a ∈ {} ⟹ P |
| insertI1 | a ∈ insert a B |
| insertI2 | a ∈ B ⟹ a ∈ insert b B |
| insertE | a ∈ insert b A ⟹ (a = b ⟹ P) ⟹ (a ∈ A ⟹ P) ⟹ P |
| ComplI | (c ∈ A ⟹ False) ⟹ c ∈ - A |
| ComplD | c ∈ - A ⟹ c ∉ A |
| UnI1 | c ∈ A ⟹ c ∈ A ∪ B |
| UnI2 | c ∈ B ⟹ c ∈ A ∪ B |
| UnCI | (c ∉ B ⟹ c ∈ A) ⟹ c ∈ A ∪ B |
| UnE | c ∈ A ∪ B ⟹ (c ∈ A ⟹ P) ⟹ (c ∈ B ⟹ P) ⟹ P |
| IntI | c ∈ A ⟹ c ∈ B ⟹ c ∈ A ∩ B |
| IntD1 | c ∈ A ∩ B ⟹ c ∈ A |
| IntD2 | c ∈ A ∩ B ⟹ c ∈ B |
| IntE | c ∈ A ∩ B ⟹ (c ∈ A ⟹ c ∈ B ⟹ P) ⟹ P |
| UN_I | a ∈ A ⟹ b ∈ B a ⟹ b ∈ (⋃x∈A. B x) |
| UN_E | b ∈ (⋃x∈A. B x) ⟹ (⋀x. x∈A ⟹ b ∈ B x ⟹ R) ⟹ R |
| INT_I | (⋀x. x ∈ A ⟹ b ∈ B x) ⟹ b ∈ (⋂x∈A. B x) |
| INT_D | b ∈ (⋂x∈A. B x) ⟹ a ∈ A ⟹ b ∈ B a |
| INT_E | b ∈ (⋂x∈A. B x) ⟹ (b ∈ B a ⟹ R) ⟹ (a ∉ A ⟹ R) ⟹ R |
| UnionI | X ∈ C ⟹ A ∈ X ⟹ A ∈ ⋃C |
| UnionE | A ∈ ⋃C ⟹ (⋀X. A ∈ X ⟹ X ∈ C ⟹ R) ⟹ R |
| InterI | (⋀X. X ∈ C ⟹ A ∈ X) ⟹ A ∈ ⋂C |
| InterD | A ∈ ⋂C ⟹ X ∈ C ⟹ A ∈ X |
| InterE | A ∈ ⋂C ⟹ (X ∉ C ⟹ R) ⟹ (A ∈ X ⟹ R) ⟹ R |
| PowI | A ⊆ B ⟹ A ∈ Pow B |
| PowD | A ∈ Pow B ⟹ A ⊆ B |
| imageI | x ∈ A ⟹ f x ∈ f ` A |
| imageE | ⟦ b ∈ (λx. f x) ` A; ⋀X. ⟦b = f x; x ∈ A ⟧⟹P ⟧ ⟹P  |
| rangeI | f x ∈ range f |
| rangeE | b ∈ range (λx. f x) ⟹ (⋀x. b = f x ⟹ P) ⟹ P |




> 更新: 2021-06-26 01:54:04  
> 原文: <https://www.yuque.com/zhaoyongwang/fpp/uonte2>