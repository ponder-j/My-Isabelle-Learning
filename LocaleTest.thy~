theory LocaleTest
  imports Main
begin

locale database0 = 
  fixes update :: "'s \<Rightarrow> 'k \<Rightarrow> 'v \<Rightarrow> 's" ("_ [_ := _]")
    and query  :: "'s \<Rightarrow> 'k \<Rightarrow> 'v option" ("_ \<triangleright> _")
  assumes updt_que: "s[k := v] \<triangleright> k = Some v"
begin
fun updates :: "'s \<Rightarrow> ('k \<times> 'v) list \<Rightarrow> 's"
  where "updates s [] = s" |
        "updates s ((k, v) # xs) = updates (update s k v) xs"
end

context database0
begin
definition queries :: "'s \<Rightarrow> 'k list \<Rightarrow> ('v option) list"
  where "queries s ks \<equiv> map (query s) ks"
end

definition (in database0) queries2 :: "'s \<Rightarrow> 'k list \<Rightarrow> ('v option) list"
  where "queries2 s ks \<equiv> map (query s) ks"

thm database0_def
print_locale database0
print_theorems
term "database0.updates"
thm database0.updates.simps


end